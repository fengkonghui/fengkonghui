<extend name="Public/main" />
<!-- content -->
<block name="body">
	<div class="group-topic bgWhite">
		<div class="life_title">
			<h2>发布话题</h2>
		</div>
		<div class="h20"></div>
		<form id="form1" class="form-topic" action="{:U()}" method="post" novalidate="novalidate">
			<input type="hidden" value="{$_GET['id']}" name="id">
			<ul>
				<li>
					<label>主题：</label>
					<input type="text" name="title" class="txt">
				</li>
				<li>
					<label>内容：</label>
					<textarea id="content" name="content" class="fl" required></textarea>
				</li>
				<li>
					<label>&nbsp;</label>
					<input type="submit" class="submit" value="发布">
				</li>
			</ul>
		</form>
		<div class="h20"></div>
	</div>
</block>

<block name="script">
<script charset="utf-8" src="/static/asset/kindeditor/kindeditor-min.js"></script>
<script charset="utf-8" src="/static/asset/kindeditor/lang/zh_CN.js"></script>
<script>
KindEditor.ready(function(K) {
    window.editor = K.create('#content',{
    	afterBlur: function(){
    		this.sync();
    	}
    });
});
</script>
<script type="text/javascript">
jQuery.extend(jQuery.validator.messages, {
    required: "必选字段",
	remote: "请修正该字段",
	email: "请输入正确格式的电子邮件",
	url: "请输入合法的网址",
	date: "请输入合法的日期",
	dateISO: "请输入合法的日期 (ISO).",
	number: "请输入合法的数字",
	digits: "只能输入整数",
	creditcard: "请输入合法的信用卡号",
	equalTo: "请再次输入相同的值",
	accept: "请输入拥有合法后缀名的字符串",
	maxlength: jQuery.validator.format("请输入一个 长度最多是 {0} 的字符串"),
	minlength: jQuery.validator.format("请输入一个 长度最少是 {0} 的字符串"),
	rangelength: jQuery.validator.format("请输入 一个长度介于 {0} 和 {1} 之间的字符串"),
	range: jQuery.validator.format("请输入一个介于 {0} 和 {1} 之间的值"),
	max: jQuery.validator.format("请输入一个最大为{0} 的值"),
	min: jQuery.validator.format("请输入一个最小为{0} 的值")
});
$('#form1').validate({
	submitHandler: function (form) {
		content = $('#content').val();
		title = $("input[name=title]").val();
		if(content && title)
			form.submit();
		else
			alert('请填写主题或内容');
	}
});
</script>
</block>